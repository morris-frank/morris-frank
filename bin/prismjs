#!/usr/bin/env node
var fs = require('fs');
const jsdom = require("jsdom");
const { JSDOM } = jsdom;
const Prism = require('../node_modules/prismjs/prism');
const loadLanguages = require('../node_modules/prismjs/components/');
loadLanguages(['python', 'latex']);

process.argv.slice(2).forEach(function (filepath, index, array) {
    var data = fs.readFileSync(filepath, 'utf8');
    const dom = new JSDOM(data);
    Prism.highlightAllUnder(dom.window.document, true, function(){});
    fs.writeFileSync(filepath, dom.serialize());
});
