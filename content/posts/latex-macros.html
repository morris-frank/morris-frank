---
title: "Using a LaTeX macro package"
slug: "latex-macros"
---

<p>
If your writing a lot of small documents all the time and do math in them it is
a good idea to write yourself a macro package that contains personalized macros
and functions to speed up your typesetting. Especially useful for University
assignments and notes.
</p>

<div class="tags">
    <span>LaTeX</span><span>Linux</span><span>Efficiency</span>
</div>

<hr>

<p>
If you never have written a TeX package, here the short-form with only the stuff
we need. You start the file with
</p>

<pre><code class="lang-latex">\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{YOUR-PACKAGE-NAME}</code></pre>

<p>end it with</p>

<pre><code class="lang-latex">\endinput</code></pre>

<p>and save it with extension <samp>.sty</samp> instead of <samp>.tex</samp>.</p>

<h3>Things to add</h3>

<ul>
    <li>
        Packages you always include. For example which fonts to use. In a
        package <samp>.sty</samp> file you use <var>\RequirePackage</var> instead
        of <var>\usepackage</var> to include other packages.
        <pre><code class="lang-latex">\RequirePackage{newpxtext}
\RequirePackage{mathpazo}
\RequirePackage{dsfont}</code></pre>
    </li>
    <li>
        Faster font changes. I use the same macro for bold and italic text in
        math and normal mode using the <var>\ifmmode</var> command.
        <pre><code class="lang-latex">\newcommand*{\B}[1]{\ifmmode\bm{#1}\else\textbf{#1}\fi}
\newcommand*{\I}[1]{\ifmmode\mathit{#1}\else\textit{#1}\fi}</code></pre>
    </li>
    <li>
        Unicode symbols. LaTeX supports Unicode commands so we can write the
        symbols instead of their names. The <var>\ensuremath</var> call makes
        commands from <var>amsmath</var> also work in normal text mode. If you
        don't have these special characters on your keyboard I have
        <a href="{{< ref "keymap" >}}">a tutorial</a> to change that.
        <pre><code class="lang-latex">\newcommand*\ℝ{\ensuremath{\mathds{R}}}
\newcommand*\π{\ensuremath{\pi}}
\newcommand*\Σ{\ensuremath{\sum}}</code></pre>
        <var>\mathds</var> from <em>dsfont</em> gives nicer double-strokes.
    </li>
    <li>
        More math operators. I have to write lot of expected values so I made a
        nicer short version.
        <pre><code class="lang-latex">\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\E}{\mathbb{E}}</code></pre>
        The <var>\,</var> makes a tiny space.

    </li>
    <li>
        Anything else. You can <a href="https://github.com/morris-frank/latex-templates/blob/master/morris.sty">check out mine</a>
        or do whatever you like. It is recommended to use the LaTeX macro
        <var>\newcommand</var> to define new commands instead of the TeX
        <var>\def</var>. If a command name is already taken and you want to
        overwrite it use <var>\renewcommand</var> instead of
        <var>\newcommand</var>.
    </li>
</ul>

<p>
All of this is more useful for documents that you're working on by
yourself. Otherwise you have to distribute the package to your collaborators.
</p>

<h3>Using it</h3>
<p>
To make the package visible to your compiler (<samp>pdflatex</samp>,
<samp>xelatex</samp>, …) you have to put it on the TeX path. You can add to your
users local path to make it available to the compiler while using your account.
The path is called <samp>TEXMFHOME</samp> and you can look it up with:
</p>

<pre><code class="lang-bash">kpsewhich -var-value TEXMFHOME</code></pre>

<p>
On most Linux distros this will be <samp>/home/YOUR-USER/texmf</samp>, which
probably doesn't exist. As I do not want to clutter my home folder with that
folder, I changed the path by setting an environment variable with the same
name inside my <samp>xinit.rc</samp>:
</p>

<pre><code class="lang-bash">export TEXMFHOME=~/.local/share/texmf</code></pre>

<p>
After a reboot/re-login the new <samp>TEXMFHOME</samp> should be set. Inside
the folder your supposed to follow the TeX folder structure which means you
should create the folders <samp>~/.local/share/texmf/tex/latex/YOUR-PACKAGE-NAME/</samp>
and put your <samp>YOUR-PACKAGE-NAME.sty</samp> in there.
</p>

<p>If the new path is not recognized you might need to rehash the TeX path:</p>

<pre><code class="lang-bash">sudo texhash /home/YOUR-USER/.local/share/textmf</code></pre>

<p>
Now all my assignment files for University and other scribbles always start
with (as I have a <samp>morris.sty</samp>):
</p>

<pre><code class="lang-latex">\usepackage{morris}</code></pre>

<p>
and I am writing considerably faster and more readable (in my humble opinion).<br>
Instead of:
</p>

<pre><code class="lang-latex">\pmb{\sigma} = \begin{bmatrix}
    \frac{\exp{\phi_1}}{\sum_i^N \exp{\phi_i}} & \dots
\end{bmatrix}</code></pre>

<p>I write:</p>

<pre><code class="lang-latex">\B{\σ} = \bM{\÷{\exp{\φ_1}}{\Σ_i^N \exp{\φ_i}} & \… }</code></pre>
